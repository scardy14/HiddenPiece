<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/layout}"
> <!--/* 위 선언은 타임리프 레이아웃을 사용하기 위한 설정   */-->
<head>
<title>HiddenPiece</title>
</head>
<div layout:fragment="content">
    <!-- Shop Start -->
    <div class="container-fluid">
        <div class="row px-xl-5">
            <!-- Shop Sidebar Start -->
            <div class="col-lg-3 col-md-4">
                <!-- Price Start -->
                <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Filter by price</span></h5>
                <div class="bg-light p-4 mb-30">
                    <form>
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                            <input type="checkbox" class="custom-control-input" checked id="price-all">
                            <label class="custom-control-label" for="price-all">All Price</label>
                            <span class="badge border font-weight-normal">1000</span>
                        </div>
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                            <input type="checkbox" class="custom-control-input" id="price-1">
                            <label class="custom-control-label" for="price-1">$0 - $100</label>
                            <span class="badge border font-weight-normal">150</span>
                        </div>
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                            <input type="checkbox" class="custom-control-input" id="price-2">
                            <label class="custom-control-label" for="price-2">$100 - $200</label>
                            <span class="badge border font-weight-normal">295</span>
                        </div>
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                            <input type="checkbox" class="custom-control-input" id="price-3">
                            <label class="custom-control-label" for="price-3">$200 - $300</label>
                            <span class="badge border font-weight-normal">246</span>
                        </div>
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                            <input type="checkbox" class="custom-control-input" id="price-4">
                            <label class="custom-control-label" for="price-4">$300 - $400</label>
                            <span class="badge border font-weight-normal">145</span>
                        </div>
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between">
                            <input type="checkbox" class="custom-control-input" id="price-5">
                            <label class="custom-control-label" for="price-5">$400 - $500</label>
                            <span class="badge border font-weight-normal">168</span>
                        </div>
                    </form>
                </div>
                <!-- Price End -->
            </div>
            <!-- Shop Sidebar End -->


            <!-- Shop Product Start -->
            <div class="col-lg-9 col-md-8">
                <div class="row pb-3">
                    <div class="col-12 pb-1">
                        <div class="d-flex align-items-center justify-content-between mb-4">
                            <div>
                                <button class="btn btn-sm btn-light"><i class="fa fa-th-large"></i></button>
                                <button class="btn btn-sm btn-light ml-2"><i class="fa fa-bars"></i></button>
                            </div>
                            <div class="ml-2">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Sorting</button>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <a class="dropdown-item" href="#">Latest</a>
                                        <a class="dropdown-item" href="#">Popularity</a>
                                        <a class="dropdown-item" href="#">Best Rating</a>
                                    </div>
                                </div>
                                <div class="btn-group ml-2">
                                    <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Showing</button>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <a class="dropdown-item" href="#">10</a>
                                        <a class="dropdown-item" href="#">20</a>
                                        <a class="dropdown-item" href="#">30</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 이거 아래거 반복시키면 됨 -->
                    <div class="col-lg-4 col-md-6 col-sm-6 pb-1"  th:each="group:${postList}">
                        <div class="product-item bg-light mb-4">
                            <div class="product-img position-relative overflow-hidden">
                                <img class="img-fluid w-100" th:src="@{/img/}+ ${group.photo}" alt="">
                                <div class="product-action">
                                <th:block th:if="${session.mvo}">
                                 	<a class="btn btn-outline-dark btn-square" th:onclick="addToWishlist([[${group.postNo}]], [[${session.mvo.id}]]);" href=""   >
                                 		<i class="far fa-heart" th:id="'emptyHeart'+${group.postNo}"></i>
                                 		<i class="fas fa-heart" th:id="'fullHeart'+${group.postNo}"></i>
                                    </a>
                         
                                </th:block>
                                <th:block th:if="${session.mvo==null}">
                                	<a class="btn btn-outline-dark btn-square" th:onclick="addToWishlistNoSession([[${group.postNo}]]);" href=""   >
                                 		<i class="far fa-heart" ></i>
                                    </a>
                                </th:block>
                                   
                                    	
                                    <a class="btn btn-outline-dark btn-square" href="" th:href="@{/findAuctionBoardPostDetail(postNo=${group.postNo})}"><i class="fa fa-search"></i></a>
                                </div>
                            </div>
                            <div class="text-center py-4">
                                <a class="h6 text-decoration-none text-truncate" href="" th:href="@{/findAuctionBoardPostDetail(postNo=${group.postNo})}" th:text="${group.title}">${group.title}</a>
                                <div class="d-flex align-items-center justify-content-center mt-2">
                                    <h5 th:text="|${group.currentPrice}원|">${group.currentPrice}</h5><h6 class="text-muted ml-2" th:text="|${group.startPrice}원|"><del>${group.startPrice}</del></h6>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <!-- 이거 위에거 반복시키면 됨 -->
                    <div class="col-12">
                    	<!-- <th:block th:if="${session.mvo.id!=null}"> -->
                    		<div style="text-align: right;">
                    			<a style="background-color:  #FFD333; color: white; width: 80px; height: 30px;" th:href="@{/moveAuctionBoardPostForm}">글작성</a>
                    		</div>
                    	<!-- </th:block> -->
                    	<nav>
	                        <ul class="pagination justify-content-center">
	                        <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
	                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
	                        <li class="page-item"><a class="page-link" href="#">2</a></li>
	                        <li class="page-item"><a class="page-link" href="#" th:href="@{/testCheckOut}">3</a></li>
	                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
	                    	</ul>
	                    </nav>
                    </div>
                </div>
            </div>
            <!-- Shop Product End -->
        </div>
    </div>
    <!-- Shop End -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" th:inline="javascript">
$(function() {
		
})

    function addToWishlist(postNo, id){
    	let heart=$("#heart");
    	$.ajax({
    		type:"get",
    		url:"addToWishlist",
    		data:{
    			"postNo":postNo,
    			"id":id
    		},
    		success:function(result){
    			location.reload();
    		}
    	});
    	
    	let result = confirm("찜 목록으로 이동하시겠습니까?");
    	if(result){
    		 location.href = '${pageContext.request.contextPath}/wishlist';
    	}
   	}

    	
    </script>
</div>
